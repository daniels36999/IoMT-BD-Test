            <!doctype html>
            <html lang="es">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport"
                      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
                <meta http-equiv="X-UA-Compatible" content="ie=edge">
                
                <title>HISTORIAL IoMT</title>
				
				<script   src="https://code.jquery.com/jquery-2.2.4.min.js"   integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="   crossorigin="anonymous"></script>

               <!-- LIBRERIAS -->
                <script src="https://unpkg.com/xlsx@0.16.9/dist/xlsx.full.min.js"></script>
                <script src="https://unpkg.com/file-saverjs@latest/FileSaver.min.js"></script>
                <script src="https://unpkg.com/tableexport@latest/dist/js/tableexport.min.js"></script>
				

				        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
		<!-- <link rel="stylesheet" type="text/css"href="/static/css/graficas_iot.css"> -->
		<style type="text/css">#oli  {display: none;}</style>
				
            </head>

            <body>
            <br><br>
            <div class="container">
                <div class="card">
                    <div class="card-header">
                        REPORTE IOMT
                    </div>
                    <div class="card-body">
                        <button id="btnExportar" class="btn btn-success">
                            <i class="fas fa-file-excel"></i> DESCARGAR HISTORIAL
                        </button>
<h3>
                        <table id="tabla" class="table table-border table-hover">
                            <thead>
                            <tr><th>Nombre:</th><th>Daniel Patricio</th></tr>				
                            <tr><th>Apellido:</th><th>Yautibug Apugllon</th></tr>
                            <tr><th>Cedula:</th><th>06060606</th></tr>
                            <tr><th>Curso:</th><th>Otros</th></tr>
                            <tr><th></th><th></th></tr>				
                            
                            <tr><th>Fecha</th>
                                <th>Hora</th>
                                <th>Temperatura</th>
                                <th>Peso</th>
                                <th>Altura</th>
                                <th>IMC</th>
                                <th>O2Sat</th>
                            </tr>
                            </thead>
                            <tbody>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>
	<tr><td class="GF">01/06/22</td><td class="GH">10:50</td><td class="GT">30.31</td><td class="GP">86.15</td><td class="GE">1.06</td><td class="GI">76.67</td><td class="GO">45.66</td></tr>

                                <!-- AGREGAR TABLA-->
                            
                            
                            </tbody>
                        </table>
						<h3>
                    </div>
                </div>
            </div>
			
			
	 <!-- BOTON EXPORAR PDF-->
	<hr/>
	<div id="centrar1"><!-- Grafica-->
		<button type="button" class="button2" id="btnGraficar" onclick="btnGraficar">VIZUALIZAR GRAFICAS</button>
	</div><hr/>	
  
	<div id="oli">
<!-- GRAFICA TEMPERATURA CORPORAL-->
	<hr/>
	<div id="Separa_Grafica">
		<div id="Grafica_Izqui"><!-- Grafica-->
			<canvas id="GraTemperatura" width="1000" height="400"></canvas>
		</div>
		<div id="Posicion_Botton">
			<div id="btnAnimacion" class="wrap1"><!-- Boton Descargar-->
				<button type="button" class="button1" id="DescTemp"onclick="DescTemp">Descargar</button>
			</div>
		</div>
	</div><hr/>
	
<!-- GRAFICA PESO CORPORAL-->
	<div id="Separa_Grafica">
		<div id="Grafica_Izqui"><!-- Grafica-->
			<canvas id="GraPeso" width="1000" height="400"></canvas>
		</div>
		<div id="Posicion_Botton">
			<div id="btnAnimacion" class="wrap1"><!-- Boton Descargar-->
				<button type="button" class="button1" id="DescPes"onclick="DescPes">Descargar</button>
			</div>
		</div>
	</div><hr/>
	
<!-- GRAFICA ESTATURA CORPORAL-->
	<div id="Separa_Grafica">
		<div id="Grafica_Izqui"><!-- Grafica-->
			<canvas id="GraEstatura" width="1000" height="400"></canvas>
		</div>
		<div id="Posicion_Botton">
			<div id="btnAnimacion" class="wrap1"><!-- Boton Descargar-->
				<button type="button" class="button1" id="DescEst"onclick="DescEst">Descargar</button>
			</div>
		</div>
	</div><hr/>
	
<!-- GRAFICA IMC CORPORAL-->
	<div id="Separa_Grafica">
		<div id="Grafica_Izqui"><!-- Grafica-->
			<canvas id="GraImc" width="1000" height="400"></canvas>
		</div>
		<div id="Posicion_Botton">
			<div id="btnAnimacion" class="wrap1"><!-- Boton Descargar-->
				<button type="button" class="button1" id="DescImc"onclick="DescImc">Descargar</button>
			</div>
		</div>
	</div><hr/>	

<!-- GRAFICA IMC CORPORAL-->
	<div id="Separa_Grafica">
		<div id="Grafica_Izqui"><!-- Grafica-->
				<canvas id="GraO2Sat" width="1000" height="400"></canvas>
		</div>
		<div id="Posicion_Botton">
			<div id="btnAnimacion" class="wrap1"><!-- Boton Descargar-->
				<button type="button" class="button1" id="DescO2Sat"onclick="DescO2Sat">Descargar</button>
			</div>
		</div>
	</div><hr/>	
	
<!-- BOTON EXPORAR PDF-->
		<hr/>
		<div id="centrar2"><!-- Grafica-->
			<button type="button" class="button2" id="DescPDF"onclick="DescPDF">Descargar Historial en PDF</button>
		</div><hr/>	
		<hr/>
	</div>

	</body>
			
			
		                <!-- SCRIPT PARA EXPORTAR -->
                <script>
                    const $btnExportar = document.querySelector("#btnExportar"),
                        $tabla = document.querySelector("#tabla");
                    $btnExportar.addEventListener("click", function() {
                        let tableExport = new TableExport($tabla, {
                            exportButtons: false, // No queremos botones
                            filename: "Reporte de prueba", //Nombre del archivo de Excel
                            sheetname: "Reporte de prueba", //Título de la hoja
                        });
                        let datos = tableExport.getExportData();
                        let preferenciasDocumento = datos.tabla.xlsx;
                        tableExport.export2file(preferenciasDocumento.data, preferenciasDocumento.mimeType, preferenciasDocumento.filename, preferenciasDocumento.fileExtension, preferenciasDocumento.merges, preferenciasDocumento.RTL, preferenciasDocumento.sheetname);
                    });
                </script>		
			
				<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.debug.js'></script>

<script>

//<!-- GRAFICA TEMPERATURA -->
//---------------------------------------------------------
var Temp = "";       var Fec = "";
var Temperatura =[]; var Fecha =[];

$(document).ready(function() {
  $("#btnGraficar").click(function() {
	$(".GF").parent("tr").find(".GF").each(function() {
	 Fec +=$(this).html()+",";
	});
	$(".GT").parent("tr").find(".GT").each(function() {
	 Temp +=$(this).html()+",";
	});
	
	Temp=Temp.split(',')
	TempLen = Temp.length-1;
	Fec=Fec.split(',')
	for ( var i = 0; i < TempLen; i++ ) {
		Temperatura[i]=Temp[i];
		Fecha[i]=Fec[i];
		}
	var ctx= document.getElementById("GraTemperatura").getContext("2d");
	let gradient=ctx.createLinearGradient(0,0,0,400);
	gradient.addColorStop(0,"rgba(144,0,0,0.7)");
	gradient.addColorStop(1,"rgba(200,0,0,0.3)");
	var myChart= new Chart(ctx,{
		type:"line", //<!--TIPO DE GRAFICA -->
		data:{
			labels:Fecha, //<!--DATO FECHA -->		
			datasets:[{
					label:'TEMPERATURA CORPORAL',
					data:Temperatura, //<!--DATO TEMPERATURA -->
					backgroundColor: gradient,
					borderColor: "#000000",
					borderWidth:4,
						}]},
		options:{
			responsive: false,
			title: {
			 display: true,
			 text: 'HISTORIAL DE LA TEMPERATURA CORPORAL'
			  },
			
			scales:{
				yAxes:[{
					scaleLabel: {
						display: true,
						labelString: "TEMPERATURA [°C]",},
					ticks:{
						beginAtZero:true							
						}}],				
				xAxes:[{
					scaleLabel: {
						display: true,
						labelString: "FECHA [dd/mm/aa]",
					}}]												
		}}});	
		
	document.getElementById('oli').style.display = 'block';
	$("#DescTemp").click(function() {
	   myChart.options.title.text = 'Temperatura Corporal - Historial';
	   myChart.update({
		  duration: 0
	   });
	   var link = document.createElement('a');
	   link.href = myChart.toBase64Image();
	   link.download = 'Temperatura Corporal.png';
	   link.click();
	   myChart.options.title.text = 'HISTORIAL: TEMPERATURA CORPORAL';
	   myChart.update({
		  duration: 0
	   });
	   console.log("holaaaa")
	});
		
  });  
  
});



//<!-- GRAFICA PESO -->
//---------------------------------------------------------
var Pes = ""; var Fec = "";
var Peso =[]; var Fecha =[];

$(document).ready(function() {
  $("#btnGraficar").click(function() {
	$(".GF").parent("tr").find(".GF").each(function() {
	 Fec +=$(this).html()+",";
	});
	$(".GP").parent("tr").find(".GP").each(function() {
	 Pes +=$(this).html()+",";
	});
	
	Pes=Pes.split(',')
	PesLen = Pes.length-1;
	Fec=Fec.split(',')
	for ( var i = 0; i < PesLen; i++ ) {
		Peso[i]=Pes[i];
		Fecha[i]=Fec[i];
		}

	var ctx= document.getElementById("GraPeso").getContext("2d");
	let gradient=ctx.createLinearGradient(0,0,0,400);
	gradient.addColorStop(0,"rgba(0,144,0,0.7)");
	gradient.addColorStop(1,"rgba(0,200,0,0.1)");
	var myChart= new Chart(ctx,{
		type:"line", //<!--TIPO DE GRAFICA -->
		data:{
			labels:Fecha, //<!--DATO FECHA -->		
			datasets:[{
					label:'PESO CORPORAL',
					data:Peso, //<!--DATO Peso -->
					backgroundColor: gradient,
					borderColor: "#000000",
					pointBackgroundColor: "#124500",
					pointBorderColor: "#124500",	
					borderWidth:4,
						}]},
		options:{
			responsive: false,
			title: {
			 display: true,
			 text: 'HISTORIAL: PESO CORPORAL'
			  },
			scales:{
				yAxes:[{
					scaleLabel: {
						display: true,
						labelString: "PESO [Kg]",},
					ticks:{
						beginAtZero:true							
						}}],				
				xAxes:[{
					scaleLabel: {
						display: true,
						labelString: "FECHA [dd/mm/aa]",
					}}]												
		}}});	
	document.getElementById('Separa_Grafica').style.display = 'block';
	document.getElementById('btnAnimacion').style.display = 'block';	
	$("#DescPes").click(function() {
	   myChart.options.title.text = 'Peso Corporal - Historial';
	   myChart.update({
		  duration: 0
	   });
	   var link = document.createElement('a');
	   link.href = myChart.toBase64Image();
	   link.download = 'Peso Corporal.png';
	   link.click();
	   myChart.options.title.text = 'HISTORIAL: PESO CORPORAL';
	   myChart.update({
		  duration: 0
	   });
	   console.log("holaaaa")
	});	
		
  });
});

//<!-- GRAFICA ESTATURA -->
//---------------------------------------------------------
var Est = ""; var Fec = "";
var Estatura =[]; var Fecha =[];

$(document).ready(function() {
  $("#btnGraficar").click(function() {
	$(".GF").parent("tr").find(".GF").each(function() {
	 Fec +=$(this).html()+",";
	});
	$(".GE").parent("tr").find(".GE").each(function() {
	 Est +=$(this).html()+",";
	});
	
	Est=Est.split(',')
	EstLen = Est.length-1;
	Fec=Fec.split(',')
	for ( var i = 0; i < EstLen; i++ ) {
		Estatura[i]=Est[i];
		Fecha[i]=Fec[i];
		}

	var ctx= document.getElementById("GraEstatura").getContext("2d");
	let gradient=ctx.createLinearGradient(0,0,0,400);
	gradient.addColorStop(0,"rgba(0,0,144,0.7)");
	gradient.addColorStop(1,"rgba(0,0,200,0.1)");
	var myChart= new Chart(ctx,{
		type:"line", //<!--TIPO DE GRAFICA -->
		data:{
			labels:Fecha, //<!--DATO FECHA -->		
			datasets:[{
					label:'ESTATURA CORPORAL',
					data:Estatura, //<!--DATO Estatura -->
					backgroundColor: gradient,
					borderColor: "#000000",
					pointBackgroundColor: "#124500",
					pointBorderColor: "#124500",
					borderWidth:4,					
						}]},
		options:{
			responsive: false,
			title: {
			 display: true,
			 text: 'HISTORIAL: ESTATURA CORPORAL'
			  },
			scales:{
				yAxes:[{
					scaleLabel: {
						display: true,
						labelString: "ESTATURA [m]",},
					ticks:{
						beginAtZero:true							
						}}],				
				xAxes:[{
					scaleLabel: {
						display: true,
						labelString: "FECHA [dd/mm/aa]",
					}}]												
		}}});	
		
	$("#DescEst").click(function() {
	   myChart.options.title.text = 'Estatura Corporal - Historial';
	   myChart.update({
		  duration: 0
	   });
	   var link = document.createElement('a');
	   link.href = myChart.toBase64Image();
	   link.download = 'Estatura Corporal.png';
	   link.click();
	   myChart.options.title.text = 'HISTORIAL: ESTATURA CORPORAL';
	   myChart.update({
		  duration: 0
	   });
	   console.log("holaaaa")
	});
  });
});

//<!-- GRAFICA IMC -->
//---------------------------------------------------------

var Im = ""; var Fec = "";
var IMC =[]; var Fecha =[];

$(document).ready(function() {
  $("#btnGraficar").click(function() {
	$(".GF").parent("tr").find(".GF").each(function() {
	 Fec +=$(this).html()+",";
	});
	$(".GI").parent("tr").find(".GI").each(function() {
	 Im +=$(this).html()+",";
	});
	
	Im=Im.split(',')
	ImcLen = Im.length-1;
	Fec=Fec.split(',')
	for ( var i = 0; i < ImcLen; i++ ) {
		IMC[i]=Im[i];
		Fecha[i]=Fec[i];
		}

	var ctx= document.getElementById("GraImc").getContext("2d");
	let gradient=ctx.createLinearGradient(0,0,0,400);
	gradient.addColorStop(0,"rgba(200,0,255,0.8)");
	gradient.addColorStop(1,"rgba(126, 2, 252, 0.3)");
	var myChart= new Chart(ctx,{
		type:"line", //<!--TIPO DE GRAFICA -->
		data:{
			labels:Fecha, //<!--DATO FECHA -->		
			datasets:[{
					label:'INDICE DE MASA CORPORAL',
					data:IMC, //<!--DATO IMC -->
					backgroundColor:gradient,
					borderColor: "#000000",
					pointBackgroundColor: "#124500",
					pointBorderColor: "#124500",
					borderWidth:4,
						}]},
		options:{
			responsive: false,
			title: {
			 display: true,
			 text: 'HISTORIAL: INDICE DE MASA CORPORAL'
			  },
			scales:{
				yAxes:[{
					scaleLabel: {
						display: true,
						labelString: "IMC [Kg/m^2]",},
					ticks:{
						beginAtZero:true							
						}}],				
				xAxes:[{
					scaleLabel: {
						display: true,
						labelString: "FECHA [dd/mm/aa]",
					}}]												
		}}});	
	$("#DescImc").click(function() {
	   myChart.options.title.text = 'IMC - Historial';
	   myChart.update({
		  duration: 0
	   });
	   var link = document.createElement('a');
	   link.href = myChart.toBase64Image();
	   link.download = 'IMC.png';
	   link.click();
	   myChart.options.title.text = 'HISTORIAL: INDICE DE MASA CORPORAL';
	   myChart.update({
		  duration: 0
	   });
	   console.log("holaaaa")
	});	
  });
});




//<!-- GRAFICA O2Sat -->
//---------------------------------------------------------
var O2S = "";  var Fec = "";
var O2Sat =[]; var Fecha =[];

$(document).ready(function() {
  $("#btnGraficar").click(function() {
	$(".GF").parent("tr").find(".GF").each(function() {
	 Fec +=$(this).html()+",";
	});
	$(".GO").parent("tr").find(".GO").each(function() {
	 O2S +=$(this).html()+",";
	});
	
	O2S=O2S.split(',')
	O2SLen = O2S.length-1;
	Fec=Fec.split(',')
	for ( var i = 0; i < O2SLen; i++ ) {
		O2Sat[i]=O2S[i];
		Fecha[i]=Fec[i];
		}

	var ctx= document.getElementById("GraO2Sat").getContext("2d");
	let gradient=ctx.createLinearGradient(0,0,0,400);
	gradient.addColorStop(0,"rgba(255, 248, 8, 0.9)");
	gradient.addColorStop(1,"rgba(255, 248, 8, 0.2)");
	var myChart= new Chart(ctx,{
		type:"line", //<!--TIPO DE GRAFICA -->
		data:{
			labels:Fecha, //<!--DATO FECHA -->		
			datasets:[{
					label:'O2SAT',
					data:O2Sat, //<!--DATO O2Sat -->
					backgroundColor: gradient,
					borderColor: "#000000",
					pointBackgroundColor: "#124500",
					pointBorderColor: "#124500",	
						}]},
		options:{
			responsive: false,
			title: {
			 display: true,
			 text: 'HISTORIAL: SATURACION DE OXIGENO EN LA SANGRE'
			  },
			scales:{
				yAxes:[{
					scaleLabel: {
						display: true,
						labelString: "O2SAT [%]",},
					ticks:{
						beginAtZero:true							
						}}],				
				xAxes:[{
					scaleLabel: {
						display: true,
						labelString: "FECHA [dd/mm/aa]",
					}}]												
		}}});	
	$("#DescO2Sat").click(function() {
	   myChart.options.title.text = 'O2Sat - Historial';
	   myChart.update({
		  duration: 0
	   });
	   var link = document.createElement('a');
	   link.href = myChart.toBase64Image();
	   link.download = '=2SAT.png';
	   link.click();
	   myChart.options.title.text = 'HISTORIAL: SATURACION DE OXIGENO EN LA SANGRE';
	   myChart.update({
		  duration: 0
	   });
	   console.log("holaaaa")
	});		
		
  });
});

//EXPORTAR TODOS LOS GRAFICOS
//-------------------------------------------------
$('#DescPDF').click(function(event) { 
	var reportPageHeight = 1500;
	var reportPageWidth = 2200;
	var pdfCanvas = $('<canvas />').attr({
    id: "canvaspdf",
    width: reportPageWidth,
    height: reportPageHeight
  });
  
  var pdfctx = $(pdfCanvas)[0].getContext('2d');
  var pdfctxX = 0;
  var pdfctxY = 0;
  var buffer = 100;
  
  $("canvas").each(function(index) {
    var canvasHeight = $(this).innerHeight();
    var canvasWidth = $(this).innerWidth();
    
    pdfctx.drawImage($(this)[0], pdfctxX, pdfctxY, canvasWidth, canvasHeight);
    pdfctxX += canvasWidth + buffer;
    
    if (index % 2 === 1) {
      pdfctxX = 0;
      pdfctxY += canvasHeight + buffer;
    }
  });
  
  var pdf = new jsPDF('l', 'pt', [reportPageWidth, reportPageHeight]);
  pdf.addImage($(pdfCanvas)[0], 'PNG', 0, 0);
  pdf.save('filename.pdf');
});

function done(){
  alert("haha");
  var url=myLine.toBase64Image();
  document.getElementById("url").src=url;
}

</script>




            </body>
            </html>
            